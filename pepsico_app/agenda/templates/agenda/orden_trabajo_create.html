{% extends 'base.html' %}
{% load static %}

{% block title %}Crear Orden de Trabajo{% endblock %}

{% block static %}
<link rel="stylesheet" href="{% static 'agenda/css/formulario.css' %}">
{% endblock %}

{% block content %}
<div class="contenedor">
  <div class="formulario">
    <h2>
      <i class="fas fa-plus"></i> Crear Orden de Trabajo
    </h2>

    <div class="alert alert-info mb-4">
      <h6><i class="fas fa-info-circle"></i> Información del Ingreso</h6>
      <p class="mb-1"><strong>ID:</strong> {{ ingreso.id_ingreso }}</p>
      <p class="mb-1"><strong>Patente:</strong> {{ ingreso.patent }}</p>
      <p class="mb-1"><strong>Chofer:</strong> {{ ingreso.chofer.name }}</p>
      <p class="mb-1"><strong>Entrada:</strong> {{ ingreso.entry_datetime|date:"d/m/Y H:i" }}</p>
    </div>

    <form method="post">
      {% csrf_token %}

      <div class="campo">
        <label for="{{ form.status.id_for_label }}">Estado</label>
        {{ form.status }}
        {% if form.status.errors %}
          <div class="text-danger">{{ form.status.errors }}</div>
        {% endif %}
      </div>

      <div class="campo">
        <label for="{{ form.service_type.id_for_label }}">Tipo de Servicio</label>
        {{ form.service_type }}
        {% if form.service_type.errors %}
          <div class="text-danger">{{ form.service_type.errors }}</div>
        {% endif %}
        <small class="form-text text-muted">Selecciona el tipo de servicio para esta orden de trabajo</small>
      </div>

      <div class="campo">
        <label for="{{ form.estimated_completion.id_for_label }}">Completación Estimada</label>
        {{ form.estimated_completion }}
        {% if form.estimated_completion.errors %}
          <div class="text-danger">{{ form.estimated_completion.errors }}</div>
        {% endif %}
      </div>

      <div class="campo">
        <label for="{{ form.supervisor.id_for_label }}">Supervisor</label>
        {{ form.supervisor }}
        {% if form.supervisor.errors %}
          <div class="text-danger">{{ form.supervisor.errors }}</div>
        {% endif %}
      </div>

      <div class="campo">
        <label for="{{ form.observations.id_for_label }}">Observaciones</label>
        {{ form.observations }}
        {% if form.observations.errors %}
          <div class="text-danger">{{ form.observations.errors }}</div>
        {% endif %}
      </div>

      <div class="botones">
        <button type="submit" class="btn-programar">
          <i class="fas fa-save"></i> Crear Orden de Trabajo
        </button>
        <a href="{% url 'orden_trabajo_list' %}" class="btn-programar" style="background-color: #6c757d;">
          <i class="fas fa-times"></i> Cancelar
        </a>
      </div>
    </form>
  </div>
</div>
{% endblock %}