{% extends 'base.html' %}
{% load static %}

{% block title %}Agregar Mecánico - OT-{{ work_order.id_work_order }}{% endblock %}

{% block static %}
<link rel="stylesheet" href="{% static 'agenda/css/formulario.css' %}">
{% endblock %}

{% block content %}
<div class="contenedor">
  <div class="formulario">
    <h2>
      <i class="fas fa-user-plus"></i> Agregar Mecánico
    </h2>

    <div class="alert alert-info mb-4">
      <h6><i class="fas fa-tools"></i> Orden de Trabajo OT-{{ work_order.id_work_order }}</h6>
      <p class="mb-1"><strong>Patente:</strong> {{ work_order.ingreso.patent }}</p>
      <p class="mb-1"><strong>Estado:</strong>
        <span class="badge" style="background-color: {{ work_order.status.color }};">
          {{ work_order.status.name }}
        </span>
      </p>
    </div>

    <form method="post">
      {% csrf_token %}

      <div class="campo">
        <label for="{{ form.mechanic.id_for_label }}">Mecánico</label>
        {{ form.mechanic }}
        {% if form.mechanic.errors %}
          <div class="text-danger">{{ form.mechanic.errors }}</div>
        {% endif %}
        <small class="form-text text-muted">Selecciona el mecánico a asignar a esta orden de trabajo</small>
      </div>

      <div class="campo">
        <label for="{{ form.hours_worked.id_for_label }}">Horas Trabajadas</label>
        {{ form.hours_worked }}
        {% if form.hours_worked.errors %}
          <div class="text-danger">{{ form.hours_worked.errors }}</div>
        {% endif %}
        <small class="form-text text-muted">Horas que el mecánico ya ha trabajado (opcional)</small>
      </div>

      <div class="botones">
        <button type="submit" class="btn-programar">
          <i class="fas fa-save"></i> Asignar Mecánico
        </button>
        <a href="{% url 'orden_trabajo_detail' work_order.id_work_order %}" class="btn-programar" style="background-color: #6c757d;">
          <i class="fas fa-times"></i> Cancelar
        </a>
      </div>
    </form>
  </div>
</div>
{% endblock %}