{% extends 'base.html' %}
{% load static %}

{% block title %}Agregar Repuesto - OT-{{ work_order.id_work_order }}{% endblock %}

{% block static %}
<link rel="stylesheet" href="{% static 'agenda/css/formulario.css' %}">
{% endblock %}

{% block content %}
<div class="contenedor">
  <div class="formulario">
    <h2>
      <i class="fas fa-cog"></i> Agregar Repuesto
    </h2>

    <div class="alert alert-info mb-4">
      <h6><i class="fas fa-tools"></i> Orden de Trabajo OT-{{ work_order.id_work_order }}</h6>
      <p class="mb-1"><strong>Patente:</strong> {{ work_order.ingreso.patent }}</p>
      <p class="mb-1"><strong>Estado:</strong>
        <span class="badge" style="background-color: {{ work_order.status.color }};">
          {{ work_order.status.name }}
        </span>
      </p>
    </div>

    <form method="post">
      {% csrf_token %}

      <div class="campo">
        <label for="{{ form.repuesto.id_for_label }}">Repuesto</label>
        {{ form.repuesto }}
        {% if form.repuesto.errors %}
          <div class="text-danger">{{ form.repuesto.errors }}</div>
        {% endif %}
        <small class="form-text text-muted">Selecciona el repuesto utilizado</small>
      </div>

      <div class="campo">
        <label for="{{ form.quantity_used.id_for_label }}">Cantidad Utilizada</label>
        {{ form.quantity_used }}
        {% if form.quantity_used.errors %}
          <div class="text-danger">{{ form.quantity_used.errors }}</div>
        {% endif %}
      </div>

      <div class="campo">
        <label for="{{ form.unit_cost.id_for_label }}">Costo Unitario</label>
        {{ form.unit_cost }}
        {% if form.unit_cost.errors %}
          <div class="text-danger">{{ form.unit_cost.errors }}</div>
        {% endif %}
        <small class="form-text text-muted">Costo por unidad del repuesto</small>
      </div>

      <div class="campo">
        <label for="{{ form.notes.id_for_label }}">Notas</label>
        {{ form.notes }}
        {% if form.notes.errors %}
          <div class="text-danger">{{ form.notes.errors }}</div>
        {% endif %}
        <small class="form-text text-muted">Observaciones adicionales sobre el uso del repuesto</small>
      </div>

      <div class="botones">
        <button type="submit" class="btn-programar">
          <i class="fas fa-save"></i> Agregar Repuesto
        </button>
        <a href="{% url 'orden_trabajo_detail' work_order.id_work_order %}" class="btn-programar" style="background-color: #6c757d;">
          <i class="fas fa-times"></i> Cancelar
        </a>
      </div>
    </form>
  </div>
</div>
{% endblock %}