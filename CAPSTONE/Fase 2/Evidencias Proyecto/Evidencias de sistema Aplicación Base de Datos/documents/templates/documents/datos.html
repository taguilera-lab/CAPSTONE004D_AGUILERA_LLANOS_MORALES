{% extends "base.html" %}
{% load static %}

{% block title %}Visualizaci√≥n de Datos{% endblock %}
{% block static %}
    <script src="{% static "documents/main.js" %}" defer></script>
    <link rel="stylesheet" href="{% static "documents/Css/datos.css" %}">
{% endblock %}
{% block content %}
    {% if messages %}
        <div class="messages">
            {% for message in messages %}
                <div class="alert alert-{{ message.tags }}">
                    {{ message }}
                </div>
            {% endfor %}
        </div>
    {% endif %}
    <div>
      <!-- Navigation Links -->
      <div style="margin-bottom: 20px; padding: 10px; background-color: #f8f9fa; border-radius: 5px;">
        <a href="{% url 'busqueda_patente' %}" class="btn btn-primary" style="margin-right: 10px;">
          üîç B√∫squeda por Patente
        </a>
        <a href="{% url 'create_form' %}" class="btn btn-success">
          ‚ûï Crear Nuevo Registro
        </a>
      </div>

      <!-- Selector de tablas -->
      <label for="tablaSelector"><strong>Selecciona una tabla:</strong></label>
      <select id="tablaSelector" onchange="mostrarTabla()">
        <option value="tabla-sites">Sites</option>
        <option value="tabla-sapequipment">SAP Equipment</option>
        <option value="tabla-ceco">CECO</option>
        <option value="tabla-vehicletypes">Tipos de Veh√≠culos</option>
        <option value="tabla-vehiclestatus">Estados de Veh√≠culos</option>
        <option value="tabla-vehicles">Veh√≠culos</option>
        <option value="tabla-roles">Roles</option>
        <option value="tabla-userstatus">Estados de Usuarios</option>
        <option value="tabla-flotausers">Usuarios de Flota</option>
        <option value="tabla-routes">Rutas</option>
        <option value="tabla-servicetypes">Tipos de Servicio</option>
        <option value="tabla-ingresos">Ingresos</option>
        <option value="tabla-workorders">√ìrdenes de Trabajo</option>
        <option value="tabla-workorderstatuses">Estados de √ìrdenes de Trabajo</option>
        <option value="tabla-workordermechanics">Mec√°nicos de √ìrdenes de Trabajo</option>
        <option value="tabla-tasks">Tareas</option>
        <option value="tabla-taskassignments">Asignaciones de Tareas</option>
        <option value="tabla-sparepartusages">Uso de Repuestos</option>
        <option value="tabla-pauses">Pausas</option>
        <option value="tabla-documents">Documentos</option>
        <option value="tabla-workorderimages">Im√°genes de √ìrdenes de Trabajo</option>
        <option value="tabla-ingresoimages">Im√°genes de Ingresos</option>
        <option value="tabla-repuestos">Repuestos</option>
        <option value="tabla-incidents">Incidentes</option>
        <option value="tabla-incidentimages">Im√°genes de Incidentes</option>
        <option value="tabla-diagnostics">Diagn√≥sticos</option>
        <option value="tabla-notifications">Notificaciones</option>
        <option value="tabla-reports">Reportes</option>
        <option value="tabla-maintenanceschedules">Programaciones de Mantenimiento</option>
      </select>

      <!-- Barra de b√∫squeda -->
      <br><br>
      <label for="searchInput"><strong>Buscar:</strong></label>
      <input type="text" id="searchInput" placeholder="Ingrese el t√©rmino de b√∫squeda">
      <label for="fieldSelector"><strong>Campo:</strong></label>
      <select id="fieldSelector">
        <option value="all">Todos</option>
      </select>

      <!-- Botones de modo -->
      <br><br>
      <button id="btnModoEditar" onclick="activarModoEditar()">Editar</button>
      <button id="btnModoEliminar" onclick="activarModoEliminar()">Eliminar</button>
      <button id="btnEliminarSeleccionados" onclick="eliminarSeleccionados()" style="display: none;">Eliminar Seleccionados</button>
      <!-- Sites -->
      <div id="tabla-sites" class="tabla-contenedor">
        <h2>Sites</h2>
        <table>
        <thead>
          <tr>
            <th class="edit-column">Editar</th>
            <th>ID</th>
            <th>Nombre</th>
            <th>Cantidad de Patentes</th>
          </tr>
        </thead>
        <tbody>
          {% for site in sites %}
          <tr>
            <td class="edit-column"><button onclick="editarRegistro('sites', '{{ site.pk }}')">Editar</button></td>
            <td>{{ site.id_site }}</td>
            <td>{{ site.name }}</td>
            <td>{{ site.patent_count }}</td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="4">No hay datos disponibles</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>

      </div>
      <!-- SAPEquipment -->
      <div id="tabla-sapequipment" class="tabla-contenedor">
        <h2>SAP Equipment</h2>
        <table>
        <thead>
          <tr>
            <th class="edit-column">Editar</th>
            <th>ID</th>
            <th>C√≥digo</th>
            <th>Descripci√≥n</th>
          </tr>
        </thead>
        <tbody>
          {% for equipment in sap_equipments %}
          <tr>
            <td class="edit-column"><button onclick="editarRegistro('sap_equipments', '{{ equipment.pk }}')">Editar</button></td>
            <td>{{ equipment.id_equipment }}</td>
            <td>{{ equipment.code }}</td>
            <td>{{ equipment.description|default:"Sin descripci√≥n" }}</td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="4">No hay datos disponibles</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>

      </div>
      <!-- CECO -->
      <div id="tabla-ceco" class="tabla-contenedor">
        <h2>CECO</h2>
        <table>
        <thead>
          <tr>
            <th class="edit-column">Editar</th>
            <th>ID</th>
            <th>C√≥digo</th>
            <th>Nombre</th>
            <th>Tipo</th>
            <th>Descripci√≥n</th>
          </tr>
        </thead>
        <tbody>
          {% for ceco in cecos %}
          <tr>
            <td class="edit-column"><button onclick="editarRegistro('cecos', '{{ ceco.pk }}')">Editar</button></td>
            <td>{{ ceco.id_ceco }}</td>
            <td>{{ ceco.code }}</td>
            <td>{{ ceco.name }}</td>
            <td>{{ ceco.type }}</td>
            <td>{{ ceco.description|default:"Sin descripci√≥n" }}</td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="6">No hay datos disponibles</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>

      </div>
      <!-- VehicleTypes -->
      <div id="tabla-vehicletypes" class="tabla-contenedor">
        <h2>Tipos de Veh√≠culos</h2>
        <table>
        <thead>
          <tr>
            <th class="edit-column">Editar</th>
            <th>ID</th>
            <th>Nombre</th>
            <th>Site</th>
            <th>Datos</th>
          </tr>
        </thead>
        <tbody>
          {% for vehicle_type in vehicle_types %}
          <tr>
            <td class="edit-column"><button onclick="editarRegistro('vehicle_types', '{{ vehicle_type.pk }}')">Editar</button></td>
            <td>{{ vehicle_type.id_type }}</td>
            <td>{{ vehicle_type.name }}</td>
            <td>{{ vehicle_type.site.name }}</td>
            <td>{{ vehicle_type.data }}</td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="5">No hay datos disponibles</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>

      </div>
      <!-- VehicleStatus -->
      <div id="tabla-vehiclestatus" class="tabla-contenedor">
        <h2>Estados de Veh√≠culos</h2>
        <table>
        <thead>
          <tr>
            <th class="edit-column">Editar</th>
            <th>ID</th>
            <th>Nombre</th>
            <th>Descripci√≥n</th>
          </tr>
        </thead>
        <tbody>
          {% for status in vehicle_statuses %}
          <tr>
            <td class="edit-column"><button onclick="editarRegistro('vehicle_statuses', '{{ status.pk }}')">Editar</button></td>
            <td>{{ status.id_status }}</td>
            <td>{{ status.name }}</td>
            <td>{{ status.description|default:"Sin descripci√≥n" }}</td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="4">No hay datos disponibles</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>

      </div>
      <!-- Vehicles -->
      <div id="tabla-vehicles" class="tabla-contenedor">
        <h2>Veh√≠culos</h2>
        <table>
        <thead>
          <tr>
            <th class="edit-column">Editar</th>
            <th>Patente</th>
            <th>Equipo</th>
            <th>CECO</th>
            <th>Marca</th>
            <th>Modelo</th>
            <th>A√±o</th>
            <th>Edad</th>
            <th>Vida √ötil</th>
            <th>Kilometraje</th>
            <th>Site</th>
            <th>Operativo</th>
            <th>Respaldo</th>
            <th>Fuera de Servicio</th>
            <th>Tipo</th>
            <th>Plan</th>
            <th>Siniestro</th>
            <th>Observaciones</th>
            <th>Cumplimiento</th>
            <th>TCT</th>
            <th>Geotab</th>
            <th>Subasta</th>
            <th>Estado</th>
          </tr>
        </thead>
        <tbody>
          {% for vehicle in vehicles %}
          <tr>
            <td class="edit-column"><button onclick="editarRegistro('vehicles', '{{ vehicle.pk }}')">Editar</button></td>
            <td>{{ vehicle.patent }}</td>
            <td>{{ vehicle.equipment.code }}</td>
            <td>{{ vehicle.ceco.name }}</td>
            <td>{{ vehicle.brand }}</td>
            <td>{{ vehicle.model }}</td>
            <td>{{ vehicle.year }}</td>
            <td>{{ vehicle.age }}</td>
            <td>{{ vehicle.useful_life }}</td>
            <td>{{ vehicle.mileage|default:"Sin datos" }}</td>
            <td>{{ vehicle.site.name }}</td>
            <td>{{ vehicle.operational|yesno:"S√≠,No" }}</td>
            <td>{{ vehicle.backup|yesno:"S√≠,No" }}</td>
            <td>{{ vehicle.out_of_service|yesno:"S√≠,No" }}</td>
            <td>{{ vehicle.type.name }}</td>
            <td>{{ vehicle.plan|yesno:"S√≠,No" }}</td>
            <td>{{ vehicle.sinister|yesno:"S√≠,No" }}</td>
            <td>{{ vehicle.observations }}</td>
            <td>{{ vehicle.compliance }}</td>
            <td>{{ vehicle.tct|default:"Sin datos" }}</td>
            <td>{{ vehicle.geotab_confirm|yesno:"S√≠,No" }}</td>
            <td>{{ vehicle.auction|yesno:"S√≠,No" }}</td>
            <td>{{ vehicle.status.name|default:"Sin estado" }}</td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="23">No hay datos disponibles</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>

      </div>
      <!-- Role -->
      <div id="tabla-roles" class="tabla-contenedor">
        <h2>Roles</h2>
        <table>
        <thead>
          <tr>
            <th class="edit-column">Editar</th>
            <th>ID</th>
            <th>Nombre</th>
            <th>Descripci√≥n</th>
            <th>Es Supervisor</th>
          </tr>
        </thead>
        <tbody>
          {% for role in roles %}
          <tr>
            <td class="edit-column"><button onclick="editarRegistro('roles', '{{ role.pk }}')">Editar</button></td>
            <td>{{ role.id_role }}</td>
            <td>{{ role.name }}</td>
            <td>{{ role.description|default:"Sin descripci√≥n" }}</td>
            <td>{{ role.is_supervisor_role|yesno:"S√≠,No" }}</td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="5">No hay datos disponibles</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>

      </div>
      <!-- UserStatus -->
      <div id="tabla-userstatus" class="tabla-contenedor">
        <h2>Estados de Usuarios</h2>
        <table>
        <thead>
          <tr>
            <th class="edit-column">Editar</th>
            <th>ID</th>
            <th>Nombre</th>
            <th>Descripci√≥n</th>
          </tr>
        </thead>
        <tbody>
          {% for status in user_statuses %}
          <tr>
            <td class="edit-column"><button onclick="editarRegistro('user_statuses', '{{ status.pk }}')">Editar</button></td>
            <td>{{ status.id_status }}</td>
            <td>{{ status.name }}</td>
            <td>{{ status.description|default:"Sin descripci√≥n" }}</td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="4">No hay datos disponibles</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>

      </div>
      <!-- FlotaUsers -->
      <div id="tabla-flotausers" class="tabla-contenedor">
        <h2>Usuarios de Flota</h2>
        <table>
        <thead>
          <tr>
            <th class="edit-column">Editar</th>
            <th>ID</th>
            <th>Nombre</th>
            <th>Rol</th>
            <th>Patente</th>
            <th>Estado</th>
            <th>Observaciones</th>
            <th>GPID</th>
          </tr>
        </thead>
        <tbody>
          {% for user in flota_users %}
          <tr>
            <td class="edit-column"><button onclick="editarRegistro('flota_users', '{{ user.pk }}')">Editar</button></td>
            <td>{{ user.id_user }}</td>
            <td>{{ user.name }}</td>
            <td>{{ user.role.name }}</td>
            <td>{{ user.patent.patent }}</td>
            <td>{{ user.status.name }}</td>
            <td>{{ user.observations }}</td>
            <td>{{ user.gpid }}</td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="8">No hay datos disponibles</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>

      </div>
      <!-- Routes -->
      <div id="tabla-routes" class="tabla-contenedor">
        <h2>Rutas</h2>
        <table>
        <thead>
          <tr>
            <th class="edit-column">Editar</th>
            <th>ID</th>
            <th>C√≥digo de Ruta</th>
            <th>GTM</th>
            <th>Conductor</th>
            <th>Patente Cami√≥n</th>
            <th>Comentario</th>
          </tr>
        </thead>
        <tbody>
          {% for route in routes %}
          <tr>
            <td class="edit-column"><button onclick="editarRegistro('routes', '{{ route.pk }}')">Editar</button></td>
            <td>{{ route.id_route }}</td>
            <td>{{ route.route_code }}</td>
            <td>{{ route.gtm }}</td>
            <td>{{ route.driver.name|default:"Sin conductor" }}</td>
            <td>{{ route.truck.patent }}</td>
            <td>{{ route.comment }}</td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="7">No hay datos disponibles</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>

      </div>
      <!-- Ingresos -->
      <div id="tabla-ingresos" class="tabla-contenedor">
        <h2>Ingresos</h2>
        <table>
        <thead>
          <tr>
            <th class="edit-column">Editar</th>
            <th>ID</th>
            <th>Patente</th>
            <th>Tipo de Servicio</th>
            <th>Fecha de Entrada</th>
            <th>Fecha de Salida</th>
            <th>Chofer</th>
            <th>Supervisor</th>
            <th>Observaciones</th>
            <th>Autorizaci√≥n</th>
          </tr>
        </thead>
        <tbody>
          {% for ingreso in ingresos %}
          <tr>
            <td class="edit-column"><button onclick="editarRegistro('ingresos', '{{ ingreso.pk }}')">Editar</button></td>
            <td>{{ ingreso.id_ingreso }}</td>
            <td>{{ ingreso.patent.patent }}</td>
            <td>{{ ingreso.service_type.name }}</td>
            <td>{{ ingreso.entry_datetime }}</td>
            <td>{{ ingreso.exit_datetime|default:"Sin datos" }}</td>
            <td>{{ ingreso.chofer.name }}</td>
            <td>{{ ingreso.supervisor.name|default:"Sin supervisor" }}</td>
            <td>{{ ingreso.observations|default:"Sin observaciones" }}</td>
            <td>{{ ingreso.authorization|yesno:"S√≠,No" }}</td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="10">No hay datos disponibles</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>

      </div>
      <!-- ServiceTypes -->
      <div id="tabla-servicetypes" class="tabla-contenedor">
        <h2>Tipos de Servicio</h2>
        <table>
        <thead>
          <tr>
            <th class="edit-column">Editar</th>
            <th>ID</th>
            <th>Nombre</th>
            <th>Descripci√≥n</th>
            <th>Site</th>
          </tr>
        </thead>
        <tbody>
          {% for service_type in service_types %}
          <tr>
            <td class="edit-column"><button onclick="editarRegistro('service_types', '{{ service_type.pk }}')">Editar</button></td>
            <td>{{ service_type.id_service_type }}</td>
            <td>{{ service_type.name }}</td>
            <td>{{ service_type.description|default:"Sin descripci√≥n" }}</td>
            <td>{{ service_type.site.name }}</td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="5">No hay datos disponibles</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>

      </div>
      <!-- Tasks -->
      <div id="tabla-tasks" class="tabla-contenedor">
        <h2>Tareas</h2>
        <table>
        <thead>
          <tr>
            <th class="edit-column">Editar</th>
            <th>ID</th>
            <th>Ingreso</th>
            <th>Descripci√≥n</th>
            <th>Urgencia</th>
            <th>Fecha de Inicio</th>
            <th>Fecha de Fin</th>
            <th>Tipo de Servicio</th>
            <th>Supervisor</th>
          </tr>
        </thead>
        <tbody>
          {% for task in tasks %}
          <tr>
            <td class="edit-column"><button onclick="editarRegistro('tasks', '{{ task.pk }}')">Editar</button></td>
            <td>{{ task.id_task }}</td>
            <td>{{ task.work_order.ingreso.id_ingreso }}</td>
            <td>{{ task.description }}</td>
            <td>{{ task.urgency }}</td>
            <td>{{ task.start_datetime }}</td>
            <td>{{ task.end_datetime|default:"Sin datos" }}</td>
            <td>{{ task.service_type.name }}</td>
            <td>{{ task.supervisor.name|default:"Sin supervisor" }}</td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="9">No hay datos disponibles</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>

      </div>
      <!-- TaskAssignments -->
      <div id="tabla-taskassignments" class="tabla-contenedor">
        <h2>Asignaciones de Tareas</h2>
        <table>
        <thead>
          <tr>
            <th class="edit-column">Editar</th>
            <th>ID</th>
            <th>Tarea</th>
            <th>Usuario</th>
          </tr>
        </thead>
        <tbody>
          {% for assignment in task_assignments %}
          <tr>
            <td class="edit-column"><button onclick="editarRegistro('task_assignments', '{{ assignment.pk }}')">Editar</button></td>
            <td>{{ assignment.id_assignment }}</td>
            <td>{{ assignment.task.id_task }}</td>
            <td>{{ assignment.user.name }}</td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="4">No hay datos disponibles</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>

      </div>
      <!-- Pauses -->
      <div id="tabla-pauses" class="tabla-contenedor">
        <h2>Pausas</h2>
        <table>
        <thead>
          <tr>
            <th class="edit-column">Editar</th>
            <th>ID</th>
            <th>Asignaci√≥n</th>
            <th>Motivo</th>
            <th>Duraci√≥n</th>
            <th>Autorizaci√≥n</th>
            <th>Fecha de Inicio</th>
            <th>Fecha de Fin</th>
          </tr>
        </thead>
        <tbody>
          {% for pause in pauses %}
          <tr>
            <td class="edit-column"><button onclick="editarRegistro('pauses', '{{ pause.pk }}')">Editar</button></td>
            <td>{{ pause.id_pause }}</td>
            <td>{{ pause.assignment.id_assignment }}</td>
            <td>{{ pause.motivo }}</td>
            <td>{{ pause.duration }}</td>
            <td>{{ pause.authorization|yesno:"S√≠,No" }}</td>
            <td>{{ pause.start_datetime }}</td>
            <td>{{ pause.end_datetime }}</td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="8">No hay datos disponibles</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>

      </div>
      <!-- Documents -->
      <div id="tabla-documents" class="tabla-contenedor">
        <h2>Documentos</h2>
        <table>
        <thead>
          <tr>
            <th class="edit-column">Editar</th>
            <th>ID</th>
            <th>Ingreso</th>
            <th>Tipo</th>
            <th>Ruta del Archivo</th>
            <th>Fecha de Subida</th>
            <th>Usuario</th>
          </tr>
        </thead>
        <tbody>
          {% for document in documents %}
          <tr>
            <td class="edit-column"><button onclick="editarRegistro('documents', '{{ document.pk }}')">Editar</button></td>
            <td>{{ document.id_document }}</td>
            <td>{{ document.ingreso.id_ingreso }}</td>
            <td>{{ document.type }}</td>
            <td>{{ document.file_path }}</td>
            <td>{{ document.upload_datetime }}</td>
            <td>{{ document.user.name }}</td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="7">No hay datos disponibles</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>

      </div>
      <!-- Repuestos -->
      <div id="tabla-repuestos" class="tabla-contenedor">
        <h2>Repuestos</h2>
        <table>
        <thead>
          <tr>
            <th class="edit-column">Editar</th>
            <th>ID</th>
            <th>Nombre</th>
            <th>Cantidad</th>
            <th>Tarea</th>
            <th>Fecha de Entrega</th>
          </tr>
        </thead>
        <tbody>
          {% for repuesto in repuestos %}
          <tr>
            <td class="edit-column"><button onclick="editarRegistro('repuestos', '{{ repuesto.pk }}')">Editar</button></td>
            <td>{{ repuesto.id_repuesto }}</td>
            <td>{{ repuesto.name }}</td>
            <td>{{ repuesto.quantity }}</td>
            <td>{{ repuesto.task.id_task|default:"Sin tarea" }}</td>
            <td>{{ repuesto.delivery_datetime }}</td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="6">No hay datos disponibles</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>

      </div>
      <!-- Notifications -->
      <div id="tabla-notifications" class="tabla-contenedor">
        <h2>Notificaciones</h2>
        <table>
        <thead>
          <tr>
            <th class="edit-column">Editar</th>
            <th>ID</th>
            <th>Destinatario</th>
            <th>Mensaje</th>
            <th>Fecha de Env√≠o</th>
            <th>Tipo</th>
          </tr>
        </thead>
        <tbody>
          {% for notification in notifications %}
          <tr>
            <td class="edit-column"><button onclick="editarRegistro('notifications', '{{ notification.pk }}')">Editar</button></td>
            <td>{{ notification.id_notification }}</td>
            <td>{{ notification.recipient.name }}</td>
            <td>{{ notification.message }}</td>
            <td>{{ notification.sent_datetime }}</td>
            <td>{{ notification.type }}</td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="6">No hay datos disponibles</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>

      </div>
      <!-- Reports -->
      <div id="tabla-reports" class="tabla-contenedor">
        <h2>Reportes</h2>
        <table>
        <thead>
          <tr>
            <th class="edit-column">Editar</th>
            <th>ID</th>
            <th>Tipo</th>
            <th>Fecha de Generaci√≥n</th>
            <th>Datos</th>
            <th>Usuario</th>
          </tr>
        </thead>
        <tbody>
          {% for report in reports %}
          <tr>
            <td class="edit-column"><button onclick="editarRegistro('reports', '{{ report.pk }}')">Editar</button></td>
            <td>{{ report.id_report }}</td>
            <td>{{ report.type }}</td>
            <td>{{ report.generated_datetime }}</td>
            <td>{{ report.data }}</td>
            <td>{{ report.user.name }}</td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="6">No hay datos disponibles</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>

      </div>
      <!-- MaintenanceSchedules -->
      <div id="tabla-maintenanceschedules" class="tabla-contenedor">
        <h2>Programaciones de Mantenimiento</h2>
        <table>
  </div>
        <thead>
          <tr>
            <th class="edit-column">Editar</th>
            <th>ID</th>
            <th>Patente</th>
            <th>Tipo de Servicio</th>
            <th>Fecha de Inicio</th>
            <th>Fecha de Fin</th>
            <th>Regla de Recurrencia</th>
            <th>Recordatorio (min)</th>
            <th>Usuario Asignado</th>
            <th>Supervisor</th>
            <th>Estado</th>
            <th>Observaciones</th>
          </tr>
        </thead>
        <tbody>
          {% for schedule in maintenance_schedules %}
          <tr>
            <td class="edit-column"><button onclick="editarRegistro('maintenance_schedules', '{{ schedule.pk }}')">Editar</button></td>
            <td>{{ schedule.id_schedule }}</td>
            <td>{{ schedule.patent.patent }}</td>
            <td>{{ schedule.service_type.name }}</td>
            <td>{{ schedule.start_datetime }}</td>
            <td>{{ schedule.end_datetime }}</td>
            <td>{{ schedule.recurrence_rule|default:"Sin recurrencia" }}</td>
            <td>{{ schedule.reminder_minutes|default:"Sin recordatorio" }}</td>
            <td>{{ schedule.assigned_user.name|default:"Sin asignado" }}</td>
            <td>{{ schedule.supervisor.name|default:"Sin supervisor" }}</td>
            <td>{{ schedule.status.name }}</td>
            <td>{{ schedule.observations|default:"Sin observaciones" }}</td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="12">No hay datos disponibles</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
      <!-- WorkOrders -->
      <div id="tabla-workorders" class="tabla-contenedor">
        <h2>√ìrdenes de Trabajo</h2>
        <table>
        <thead>
          <tr>
            <th class="edit-column">Editar</th>
            <th>ID</th>
            <th>Ingreso</th>
            <th>Estado</th>
            <th>Fecha de Inicio</th>
            <th>Fecha de Fin</th>
            <th>Supervisor</th>
            <th>Observaciones</th>
          </tr>
        </thead>
        <tbody>
          {% for workorder in workorders %}
          <tr>
            <td class="edit-column"><button onclick="editarRegistro('workorders', '{{ workorder.pk }}')">Editar</button></td>
            <td>{{ workorder.id_work_order }}</td>
            <td>{{ workorder.ingreso.id_ingreso }}</td>
            <td>{{ workorder.status.name }}</td>
            <td>{{ workorder.work_started_at|default:"No iniciado" }}</td>
            <td>{{ workorder.actual_completion|default:"No completado" }}</td>
            <td>{{ workorder.supervisor.name|default:"Sin supervisor" }}</td>
            <td>{{ workorder.observations|default:"Sin observaciones" }}</td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="8">No hay datos disponibles</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>

      </div>
      <!-- WorkOrderStatuses -->
      <div id="tabla-workorderstatuses" class="tabla-contenedor">
        <h2>Estados de √ìrdenes de Trabajo</h2>
        <table>
        <thead>
          <tr>
            <th class="edit-column">Editar</th>
            <th>ID</th>
            <th>Nombre</th>
            <th>Descripci√≥n</th>
          </tr>
        </thead>
        <tbody>
          {% for status in workorderstatuses %}
          <tr>
            <td class="edit-column"><button onclick="editarRegistro('workorderstatuses', '{{ status.pk }}')">Editar</button></td>
            <td>{{ status.id_status }}</td>
            <td>{{ status.name }}</td>
            <td>{{ status.description|default:"Sin descripci√≥n" }}</td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="4">No hay datos disponibles</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>

      </div>
      <!-- WorkOrderMechanics -->
      <div id="tabla-workordermechanics" class="tabla-contenedor">
        <h2>Mec√°nicos de √ìrdenes de Trabajo</h2>
        <table>
        <thead>
          <tr>
            <th class="edit-column">Editar</th>
            <th>ID</th>
            <th>Orden de Trabajo</th>
            <th>Mec√°nico</th>
            <th>Fecha de Asignaci√≥n</th>
            <th>Horas Trabajadas</th>
            <th>Activo</th>
          </tr>
        </thead>
        <tbody>
          {% for mechanic in workordermechanics %}
          <tr>
            <td class="edit-column"><button onclick="editarRegistro('workordermechanics', '{{ mechanic.pk }}')">Editar</button></td>
            <td>{{ mechanic.id_mechanic_assignment }}</td>
            <td>{{ mechanic.work_order.id_work_order }}</td>
            <td>{{ mechanic.mechanic.name }}</td>
            <td>{{ mechanic.assigned_datetime }}</td>
            <td>{{ mechanic.hours_worked }} horas</td>
            <td>{{ mechanic.is_active|yesno:"S√≠,No" }}</td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="7">No hay datos disponibles</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>

      </div>
      <!-- SparePartUsages -->
      <div id="tabla-sparepartusages" class="tabla-contenedor">
        <h2>Uso de Repuestos</h2>
        <table>
        <thead>
          <tr>
            <th class="edit-column">Editar</th>
            <th>ID</th>
            <th>Orden de Trabajo</th>
            <th>Repuesto</th>
            <th>Cantidad Usada</th>
            <th>Fecha de Uso</th>
          </tr>
        </thead>
        <tbody>
          {% for usage in sparepartusages %}
          <tr>
            <td class="edit-column"><button onclick="editarRegistro('sparepartusages', '{{ usage.pk }}')">Editar</button></td>
            <td>{{ usage.id_usage }}</td>
            <td>{{ usage.work_order.id_work_order }}</td>
            <td>{{ usage.repuesto.name }}</td>
            <td>{{ usage.quantity_used }}</td>
            <td>{{ usage.used_datetime }}</td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="6">No hay datos disponibles</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>

      </div>
      <!-- WorkOrderImages -->
      <div id="tabla-workorderimages" class="tabla-contenedor">
        <h2>Im√°genes de √ìrdenes de Trabajo</h2>
        <table>
        <thead>
          <tr>
            <th class="edit-column">Editar</th>
            <th>ID</th>
            <th>Orden de Trabajo</th>
            <th>Imagen</th>
            <th>Descripci√≥n</th>
            <th>Fecha de Subida</th>
            <th>Usuario</th>
          </tr>
        </thead>
        <tbody>
          {% for image in workorderimages %}
          <tr>
            <td class="edit-column"><button onclick="editarRegistro('workorderimages', '{{ image.pk }}')">Editar</button></td>
            <td>{{ image.id_image }}</td>
            <td>{{ image.work_order.id_work_order }}</td>
            <td><img src="{{ image.image.url }}" alt="Imagen" style="max-width: 100px; max-height: 100px;"></td>
            <td>{{ image.description|default:"Sin descripci√≥n" }}</td>
            <td>{{ image.uploaded_at }}</td>
            <td>{{ image.uploaded_by.name|default:"Sin usuario" }}</td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="7">No hay datos disponibles</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>

      </div>
      <!-- IngresoImages -->
      <div id="tabla-ingresoimages" class="tabla-contenedor">
        <h2>Im√°genes de Ingresos</h2>
        <table>
        <thead>
          <tr>
            <th class="edit-column">Editar</th>
            <th>ID</th>
            <th>Ingreso</th>
            <th>Imagen</th>
            <th>Descripci√≥n</th>
            <th>Fecha de Subida</th>
            <th>Usuario</th>
          </tr>
        </thead>
        <tbody>
          {% for image in ingresoimages %}
          <tr>
            <td class="edit-column"><button onclick="editarRegistro('ingresoimages', '{{ image.pk }}')">Editar</button></td>
            <td>{{ image.id_image }}</td>
            <td>{{ image.ingreso.id_ingreso }}</td>
            <td><img src="{{ image.image.url }}" alt="Imagen" style="max-width: 100px; max-height: 100px;"></td>
            <td>{{ image.description|default:"Sin descripci√≥n" }}</td>
            <td>{{ image.uploaded_at }}</td>
            <td>{{ image.uploaded_by.name|default:"Sin usuario" }}</td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="7">No hay datos disponibles</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>

      </div>
      <!-- Incidents -->
      <div id="tabla-incidents" class="tabla-contenedor">
        <h2>Incidentes</h2>
        <table>
        <thead>
          <tr>
            <th class="edit-column">Editar</th>
            <th>ID</th>
            <th>Categor√≠a</th>
            <th>Prioridad</th>
            <th>Estado</th>
            <th>Descripci√≥n</th>
            <th>Fecha de Reporte</th>
            <th>Reportado Por</th>
          </tr>
        </thead>
        <tbody>
          {% for incident in incidents %}
          <tr>
            <td class="edit-column"><button onclick="editarRegistro('incidents', '{{ incident.pk }}')">Editar</button></td>
            <td>{{ incident.id_incident }}</td>
            <td>{{ incident.category }}</td>
            <td>{{ incident.priority }}</td>
            <td>{{ incident.status }}</td>
            <td>{{ incident.description|default:"Sin descripci√≥n" }}</td>
            <td>{{ incident.reported_datetime }}</td>
            <td>{{ incident.reported_by.name|default:"Sin usuario" }}</td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="8">No hay datos disponibles</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>

      </div>
      <!-- IncidentImages -->
      <div id="tabla-incidentimages" class="tabla-contenedor">
        <h2>Im√°genes de Incidentes</h2>
        <table>
        <thead>
          <tr>
            <th class="edit-column">Editar</th>
            <th>ID</th>
            <th>Incidente</th>
            <th>Imagen</th>
            <th>Nombre</th>
            <th>Fecha de Subida</th>
          </tr>
        </thead>
        <tbody>
          {% for image in incidentimages %}
          <tr>
            <td class="edit-column"><button onclick="editarRegistro('incidentimages', '{{ image.pk }}')">Editar</button></td>
            <td>{{ image.id_image }}</td>
            <td>{{ image.incident.id_incident }}</td>
            <td><img src="{{ image.image.url }}" alt="Imagen" style="max-width: 100px; max-height: 100px;"></td>
            <td>{{ image.name }}</td>
            <td>{{ image.uploaded_at }}</td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="6">No hay datos disponibles</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>

      </div>
      <!-- Diagnostics -->
      <div id="tabla-diagnostics" class="tabla-contenedor">
        <h2>Diagn√≥sticos</h2>
        <table>
        <thead>
          <tr>
            <th class="edit-column">Editar</th>
            <th>ID</th>
            <th>Incidente</th>
            <th>Estado</th>
            <th>Diagn√≥stico</th>
            <th>Fecha de Creaci√≥n</th>
            <th>Creado Por</th>
          </tr>
        </thead>
        <tbody>
          {% for diagnostic in diagnostics %}
          <tr>
            <td class="edit-column"><button onclick="editarRegistro('diagnostics', '{{ diagnostic.pk }}')">Editar</button></td>
            <td>{{ diagnostic.id_diagnostic }}</td>
            <td>{{ diagnostic.incident.id_incident }}</td>
            <td>{{ diagnostic.status }}</td>
            <td>{{ diagnostic.symptoms|default:"Sin s√≠ntomas" }}</td>
            <td>{{ diagnostic.diagnostics_created_at }}</td>
            <td>{{ diagnostic.diagnostics_created_by.name|default:"Sin usuario" }}</td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="7">No hay datos disponibles</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>

      </div>
{% endblock %}
