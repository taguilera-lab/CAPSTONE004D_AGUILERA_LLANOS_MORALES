{% extends 'base.html' %}
{% load static %}

{% block title %}Finalizar Pausa - OT-{{ pause.work_order.id_work_order }}{% endblock %}

{% block content %}
<div class="container mt-4">
  <div class="row justify-content-center">
    <div class="col-lg-6">
      <div class="card border-warning">
        <div class="card-header bg-warning text-white">
          <h4 class="mb-0">
            <i class="fas fa-stop"></i> Finalizar Pausa
          </h4>
        </div>
        <div class="card-body">
          <!-- Información de la Pausa -->
          <div class="alert alert-info">
            <h6>Información de la Pausa:</h6>
            <ul class="mb-0">
              <li><strong>OT:</strong> OT-{{ pause.work_order.id_work_order }}</li>
              <li><strong>Tipo:</strong> {{ pause.pause_type.name }}</li>
              <li><strong>Motivo:</strong> {{ pause.reason }}</li>
              <li><strong>Inicio:</strong> {{ pause.start_datetime|date:"d/m/Y H:i:s" }}</li>
              <li><strong>Duración actual:</strong> {{ pause.start_datetime|timesince }}</li>
            </ul>
          </div>

          <div class="alert alert-warning">
            <i class="fas fa-exclamation-triangle"></i>
            <strong>¿Está seguro de que desea finalizar esta pausa?</strong>
            <br>
            Una vez finalizada, la pausa se marcará como completada y no podrá modificarse.
          </div>

          <form method="post">
            {% csrf_token %}

            <!-- Notas de Finalización -->
            <div class="mb-3">
              <label for="id_completion_notes" class="form-label">
                Notas de Finalización (Opcional)
              </label>
              <textarea name="completion_notes" id="id_completion_notes" class="form-control" rows="3"
                        placeholder="Agregue cualquier comentario sobre la resolución de la pausa..."></textarea>
              <div class="form-text">Estas notas se agregarán a las notas existentes de la pausa</div>
            </div>

            <!-- Botones -->
            <div class="d-flex justify-content-between">
              <a href="{% url 'pausas:work_order_pause_detail' pause.id_pause %}" class="btn btn-secondary">
                <i class="fas fa-arrow-left"></i> Cancelar
              </a>
              <button type="submit" class="btn btn-success">
                <i class="fas fa-check"></i> Finalizar Pausa
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}