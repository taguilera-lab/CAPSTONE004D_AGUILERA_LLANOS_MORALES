{% extends 'base.html' %}
{% load static %}

{% block title %}Resolver Incidente{% endblock %}

{% block static %}
<link rel="stylesheet" href="{% static 'incidents/css/resolve_incident.css' %}">
{% endblock %}

{% block content %}
<div class="contenedor">
    <div class="formulario">
        <h2>Marcar Incidente como Resuelto</h2>
        <p><strong>Incidente:</strong> {{ incident.name }}</p>
        <p><strong>Vehículo:</strong> {{ incident.vehicle.patent }}</p>

        <form method="post">
            {% csrf_token %}

            <div class="campo">
                <label for="resolved_at">Fecha y hora de resolución:</label>
                <input type="datetime-local" id="resolved_at" name="resolved_at" required>
            </div>

            <div class="campo">
                <label for="resolution_type">Tipo de resolución:</label>
                <select id="resolution_type" name="resolution_type" required>
                    <option value="">Seleccionar tipo</option>
                    <option value="Taller">Taller</option>
                    <option value="Campo">Campo</option>
                    <option value="No_aplica">No aplica</option>
                </select>
            </div>

            <div class="campo">
                <label for="resolution_notes">Notas de resolución:</label>
                <textarea id="resolution_notes" name="resolution_notes" rows="4" placeholder="Describa cómo se resolvió el incidente..." required></textarea>
            </div>

            <div class="botones">
                <a href="{% url 'incidents:incident_detail' incident.id_incident %}" class="btn-cancelar">Cancelar</a>
                <button type="submit" class="btn-resolver">Marcar como Resuelto</button>
            </div>
        </form>
    </div>
</div>
{% endblock %}