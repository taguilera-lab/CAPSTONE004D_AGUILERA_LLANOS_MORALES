{% extends 'base.html' %}
{% load static %}

{% block title %}Completar Orden de Trabajo - OT-{{ work_order.id_work_order }}{% endblock %}

{% block static %}
<link rel="stylesheet" href="{% static 'agenda/css/formulario.css' %}">
{% endblock %}

{% block content %}
<div class="contenedor">
  <div class="formulario">
    <h2>
      <i class="fas fa-check"></i> Completar Orden de Trabajo
    </h2>

    <div class="alert alert-warning mb-4">
      <h6><i class="fas fa-exclamation-triangle"></i> Confirmación</h6>
      <p>¿Está seguro de que desea marcar como completada la orden de trabajo <strong>OT-{{ work_order.id_work_order }}</strong>?</p>
      <p class="mb-1"><strong>Patente:</strong> {{ work_order.ingreso.patent }}</p>
      <p class="mb-1"><strong>Chofer:</strong> {{ work_order.ingreso.chofer.name }}</p>
      <p class="mb-0">Esta acción no se puede deshacer.</p>
    </div>

    <form method="post">
      {% csrf_token %}

      <div class="campo">
        <label for="actual_completion">Fecha y Hora de Completación</label>
        <input type="datetime-local" name="actual_completion" id="actual_completion" class="form-control"
               value="{% now 'Y-m-d\TH:i' %}" required>
        <small class="form-text text-muted">Fecha y hora en que se completó realmente el trabajo</small>
      </div>

      <div class="botones">
        <button type="submit" class="btn-programar" style="background-color: #28a745;">
          <i class="fas fa-check"></i> Confirmar Completación
        </button>
        <a href="{% url 'orden_trabajo_detail' work_order.id_work_order %}" class="btn-programar" style="background-color: #6c757d;">
          <i class="fas fa-times"></i> Cancelar
        </a>
      </div>
    </form>
  </div>
</div>
{% endblock %}